<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPNOTEC VIP | Forge Your Future Identity</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Updated VIP Colors */
            --violet: #8F00F0;
            --indigo: #0070B0;
            --blue: #00B0F0;
            --green: #45DE10;
            --yellow: #FFF000;
            --orange: #FF6900;
            --red: #FF000F;
            --grey: #707070;
            --white: #FFFFFF;
            --black-tribe: #000000;
            
            /* Backgrounds */
            --bg: #000000;
            --card: #111111;
            --text: #ffffff;
            
            /* Effects */
            --neon-glow: 0 0 20px currentColor;
            --transition: all 0.3s ease;
            
            /* Fonts */
            --font-main: 'Rajdhani', sans-serif;
            --font-futuristic: 'Orbitron', sans-serif;
            --font-id: 'Space Mono', monospace;
            
            --current-color: #00B0F0;
            --current-color-accent: var(--blue);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--font-main);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            padding: 20px;
        }
        
        /* Cyber Grid Background */
        .cyber-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:  
                linear-gradient(rgba(143, 0, 240, 0.07) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 176, 240, 0.07) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: -3;
        }
        
        .glow-line {
            position: fixed;
            height: 2px;
            width: 100%;
            background: var(--blue);
            filter: blur(20px);
            animation: scan 10s infinite linear alternate;
            z-index: -2;
            opacity: 0.5;
        }
        
        @keyframes scan {
            0% { top: 0%; }
            100% { top: 99%; }
        }
        
        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(90deg, var(--violet), var(--blue));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: var(--neon-glow);
            letter-spacing: 2px;
            font-family: var(--font-futuristic);
        }
        
        .nav-links {
            display: flex;
            gap: 1.5rem;
        }
        
        .nav-link {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            position: relative;
        }
        
        .nav-link:hover {
            color: var(--blue);
            text-shadow: var(--neon-glow);
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--blue);
            transition: var(--transition);
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        /* Hero Section */
        .hero-section {
            text-align: center;
            padding: 4rem 1rem;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .hero-title {
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 1.5rem;
            color: var(--white);
            text-shadow: 0 0 15px var(--violet), 0 0 30px var(--blue);
            letter-spacing: 4px;
            font-family: var(--font-futuristic);
            line-height: 1.2;
            text-transform: uppercase;
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            max-width: 800px;
            margin: 0 auto 2rem auto;
            color: #ccc;
            font-weight: 400;
            letter-spacing: 1px;
        }
        
        .cta-button {
            background: linear-gradient(90deg, var(--violet), var(--blue));
            color: var(--white);
            font-weight: bold;
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: var(--font-futuristic);
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: var(--transition);
            margin-top: 2rem;
            box-shadow: 0 0 25px rgba(143, 0, 240, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .cta-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(143, 0, 240, 0.7);
        }
        
        .cta-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 20px;
            height: 200%;
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(25deg);
            transition: all 0.6s;
        }
        
        .cta-button:hover::after {
            left: 120%;
        }
        
        /* Terminal Boxes */
        .terminal-box {
            background: var(--card);
            border-radius: 15px;
            padding: 2.5rem;
            margin-bottom: 2.5rem;
            border: 1px solid var(--blue);
            box-shadow: 0 0 30px rgba(0, 176, 240, 0.2), inset 0 0 15px rgba(0,0,0,0.5);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .terminal-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 176, 240, 0.3), inset 0 0 15px rgba(0,0,0,0.5);
        }
        
        .terminal-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--blue);
            text-shadow: var(--neon-glow);
            font-family: var(--font-futuristic);
            letter-spacing: 1px;
        }
        
        .terminal-description {
            color: #ccc;
            margin-bottom: 2rem;
            font-size: 1.1rem;
            line-height: 1.7;
        }
        
        /* Input Group */
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-label {
            color: var(--white);
            display: block;
            margin-bottom: 0.7rem;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: var(--font-futuristic);
        }
        
        input, select, textarea {
            background: rgba(0, 0, 0, 0.3);
            color: var(--white);
            border: 1px solid var(--blue);
            padding: 1rem;
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;
            font-family: inherit;
            font-size: 1.05rem;
            transition: var(--transition);
        }
        
        textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--white);
            box-shadow: 0 0 15px var(--blue);
        }
        
        .action-button {
            background: var(--blue);
            color: var(--bg);
            font-weight: bold;
            padding: 1.1rem;
            border: none;
            margin-top: 1rem;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 0 20px var(--blue);
            font-family: var(--font-futuristic);
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: var(--transition);
            width: 100%;
        }
        
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px var(--blue);
        }
        
        .random-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border: 1px solid var(--blue);
            padding: 0.9rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
            margin-left: 1rem;
        }
        
        .random-btn:hover {
            background: rgba(143, 0, 240, 0.2);
            border-color: var(--violet);
        }
        
        /* Color Options */
        .color-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .color-option {
            height: 50px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
            position: relative;
        }
        
        .color-option:hover { 
            transform: scale(1.05); 
            box-shadow: 0 0 15px currentColor;
        }
        
        .color-option.selected {
            border: 2px solid var(--white);
            box-shadow: 0 0 20px var(--white);
        }
        
        .color-tooltip {
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.9rem;
            white-space: nowrap;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
            border: 1px solid var(--blue);
            pointer-events: none;
        }
        
        .color-option:hover .color-tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        /* Output */
        .output {
            background: rgba(0, 0, 0, 0.5);
            padding: 1.5rem;
            border: 1px solid var(--blue);
            border-radius: 8px;
            margin-top: 2rem;
            font-size: 1.1rem;
            color: var(--white);
            display: none;
            box-shadow: inset 0 0 10px var(--blue);
            word-break: break-all;
        }
        
        .output.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .number {  
            color: var(--blue);  
            font-weight: bold;
        }
        
        .highlight {  
            color: var(--white);  
            font-weight: bold;
            text-shadow: 0 0 5px var(--blue);
        }
        
        /* Avatar List */
        .avatar-list {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .avatar-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-left: 5px solid var(--current-color);
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            transition: var(--transition);
        }
        
        .avatar-card:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px var(--current-color);
        }
        
        .avatar-summary {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 1rem;
            color: #ccc;
        }
        
        .avatar-summary .highlight {
            color: var(--current-color);
            text-transform: uppercase;
        }
        
        .avatar-id {
            font-family: var(--font-futuristic);
            font-size: 1.5rem;
            text-align: center;
            padding-top: 1rem;
            border-top: 1px dashed var(--current-color);
            word-break: break-all;
            color: var(--current-color);
            text-shadow: 0 0 10px var(--current-color);
        }
        
        /* Username Availability */
        .availability-check {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .availability-status {
            margin-left: 1rem;
            font-weight: bold;
        }
        
        .available {
            color: var(--green);
        }
        
        .taken {
            color: var(--red);
        }
        
        /* Question Sections */
        .question-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border-left: 3px solid var(--blue);
        }
        
        .question-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--blue);
            font-family: var(--font-futuristic);
        }
        
        /* My Avatars Section */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .avatar-card-grid {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 0 15px;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.5s forwards;
        }
        
        .avatar-card-grid:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 0 25px;
        }
        
        .avatar-color-header {
            height: 80px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0,0,0,0.7);
        }
        
        .avatar-details {
            text-align: center;
        }
        
        .avatar-name {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .avatar-id-grid {
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-family: var(--font-main);
            word-break: break-all;
        }
        
        .avatar-purpose {
            font-style: italic;
            color: #ccc;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .avatar-actions {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .avatar-action-btn {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .avatar-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .glow {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255,255,255,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,255,255,0); }
        }
        
        /* Chat Section */
        #chat-section {
            display: none;
            width: 100%;
            height: 90vh;
            flex-direction: column;
            background: linear-gradient(135deg, #050505, #101010);
            border-radius: 1rem;
            border: 2px solid var(--blue);
            box-shadow: 0 0 20px var(--blue);
            overflow: hidden;
            margin-top: 20px;
        }

        .chat-header {
            background: linear-gradient(90deg, #121230, #1a1a4a);
            padding: 15px 20px;
            border-bottom: 2px solid var(--blue);
            text-align: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        
        .chat-header h1 {
            font-size: 2.2rem;
            text-transform: uppercase;
            background: linear-gradient(90deg, var(--violet), var(--blue), var(--green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(143, 0, 240, 0.3);
            font-family: var(--font-futuristic);
        }
        
        .chat-header p {
            font-size: 1rem;
            color: var(--orange);
            max-width: 800px;
            margin: 0 auto;
            font-family: var(--font-main);
        }
        
        .header-controls {
            position: absolute;
            top: 15px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .home-button {
            position: absolute;
            top: 15px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--orange);
            color: var(--orange);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-main);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .home-button:hover {
            background: rgba(255, 105, 0, 0.2);
            transform: translateY(-2px);
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--blue);
            color: var(--white);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-main);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .control-btn:hover {
            background: rgba(0, 176, 240, 0.2);
            transform: translateY(-2px);
        }
        
        .refresh-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            color: var(--yellow);
            margin-top: 10px;
            display: inline-block;
            font-family: var(--font-main);
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            padding: 10px;
        }
        
        .participants-panel {
            width: 200px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            padding: 15px;
            overflow-y: auto;
            border: 1px solid var(--indigo);
            box-shadow: 0 0 20px rgba(0, 112, 176, 0.2);
            margin-right: 10px;
        }
        
        .participants-panel h2 {
            font-size: 1.3rem;
            color: var(--blue);
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 1px solid var(--indigo);
            padding-bottom: 10px;
            font-family: var(--font-futuristic);
        }
        
        .participant {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.5);
            transition: var(--transition);
            font-family: var(--font-main);
        }
        
        .participant:hover {
            background: rgba(0, 112, 176, 0.2);
            transform: translateX(5px);
        }
        
        .participant::before {
            content: "";
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .chat-window {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            border: 1px solid var(--violet);
            box-shadow: 0 0 20px rgba(143, 0, 240, 0.2);
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 80%;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            position: relative;
            animation: fadeIn 0.3s ease;
            word-wrap: break-word;
            font-size: 1.2rem;
            line-height: 1.5;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            font-family: var(--font-main);
        }
        
        .user-message {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--indigo), var(--blue));
            color: var(--white);
            border-bottom-right-radius: 0;
        }
        
        .bot-message {
            align-self: flex-start;
            background: rgba(30, 30, 60, 0.8);
            border-bottom-left-radius: 0;
        }
        
        .username {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .message-time {
            font-size: 0.8rem;
            opacity: 0.7;
            text-align: right;
            margin-top: 8px;
        }
        
        .chat-input {
            padding: 15px;
            background: rgba(0, 0, 0, 0.9);
            border-top: 1px solid var(--violet);
            display: flex;
        }
        
        #message-input {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            font-family: var(--font-main);
            font-size: 1.2rem;
            outline: none;
        }
        
        #message-input:focus {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px var(--blue);
        }
        
        #send-button {
            background: linear-gradient(135deg, var(--blue), var(--green));
            color: var(--white);
            border: none;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            margin-left: 15px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.3rem;
            box-shadow: 0 5px 15px rgba(0, 176, 240, 0.4);
        }
        
        #send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--blue);
        }
        
        .chat-color-picker {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .chat-color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
            box-shadow: 0 0 8px rgba(255,255,255,0.3);
        }
        
        .chat-color-option:hover {
            transform: scale(1.2);
        }
        
        .chat-color-option.selected {
            border-color: var(--white);
            transform: scale(1.2);
            box-shadow: 0 0 15px currentColor;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #121240, #1a1a5a);
            width: 90%;
            max-width: 800px;
            border-radius: 20px;
            padding: 30px;
            border: 2px solid var(--violet);
            box-shadow: 0 0 40px rgba(143, 0, 240, 0.5);
            max-height: 90vh;
            overflow-y: auto;
            font-family: var(--font-main);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--blue);
            padding-bottom: 15px;
        }
        
        .modal-header h2 {
            font-size: 1.8rem;
            background: linear-gradient(90deg, var(--violet), var(--blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: var(--font-futuristic);
        }
        
        .close-btn {
            background: var(--red);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .close-btn:hover {
            transform: scale(1.1);
        }
        
        .summary-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-section {
            background: rgba(0,0,0,0.4);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .summary-section h3 {
            font-size: 1.3rem;
            color: var(--green);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(69, 222, 16, 0.3);
            font-family: var(--font-futuristic);
        }

        .summary-text, .mood-text, .topics-list-ul {
            font-size: 1.1rem;
            line-height: 1.5;
            color: var(--text);
        }

        .topics-list-ul {
            list-style: none;
            padding-left: 0;
        }

        .topics-list-ul li {
            margin-bottom: 5px;
            padding-left: 15px;
            position: relative;
        }

        .topics-list-ul li::before {
            content: "â€¢";
            color: var(--yellow);
            position: absolute;
            left: 0;
        }
        
        .chart-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .point-list {
            list-style-type: none;
            counter-reset: point-counter;
        }
        
        .point-list li {
            margin-bottom: 15px;
            padding-left: 30px;
            position: relative;
            font-size: 1.1rem;
            line-height: 1.5;
        }
        
        .point-list li::before {
            counter-increment: point-counter;
            content: counter(point-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--blue);
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .whatsapp-info {
            background: rgba(0, 112, 176, 0.2);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--blue);
            margin-top: 20px;
        }
        
        .whatsapp-info h3 {
            color: var(--green);
            margin-bottom: 10px;
            font-family: var(--font-futuristic);
        }

        .loading-spinner {
            display: none;
            text-align: center;
            padding: 20px;
            color: var(--yellow);
        }

        .loading-spinner::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--yellow);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Algorithm Explanation */
        .algorithm-explanation {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 3px solid var(--green);
            margin-bottom: 2rem;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .algorithm-explanation h3 {
            color: var(--green);
            margin-bottom: 1rem;
            font-family: var(--font-futuristic);
        }

        /* Avatar Summary Tab */
        .avatar-summary-tab {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 3px solid var(--blue);
            margin-top: 1rem;
            display: none;
        }

        .avatar-summary-tab.active {
            display: block;
        }

        .summary-tab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .summary-tab-title {
            font-size: 1.2rem;
            color: var(--blue);
            font-family: var(--font-futuristic);
        }

        .summary-tab-content {
            color: #ccc;
            line-height: 1.7;
        }

        .summary-tab-content .highlight {
            color: var(--blue);
        }

        .toggle-summary-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border: 1px solid var(--blue);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .toggle-summary-btn:hover {
            background: rgba(0, 176, 240, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 1rem; }
            .hero-title { font-size: 2.5rem; }
            .terminal-box { padding: 1.5rem; }
            .terminal-title { font-size: 1.5rem; }
            .nav-links { display: none; }
            
            #chat-section {
                height: 95vh;
            }

            .chat-container {
                flex-direction: column;
            }
            
            .participants-panel {
                width: 100%;
                height: 120px;
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .participants {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .participant {
                margin-bottom: 0;
                font-size: 0.85rem;
                padding: 6px;
            }
            
            .chat-header h1 {
                font-size: 1.7rem;
                margin-top: 10px;
            }
            
            .header-controls {
                position: static;
                justify-content: center;
                margin-top: 15px;
                flex-direction: column;
                gap: 5px;
            }

            .home-button {
                position: static;
                margin-bottom: 10px;
                width: 100%;
                justify-content: center;
            }
            
            .control-btn {
                width: 100%;
                justify-content: center;
            }

            .summary-container {
                flex-direction: column;
            }
            
            .chart-container {
                max-width: 100%;
            }

            .message {
                max-width: 95%;
                font-size: 1rem;
            }

            #message-input {
                font-size: 1rem;
                padding: 12px 15px;
            }

            #send-button {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }
            
            .avatar-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="cyber-grid"></div>
    <div class="glow-line" style="animation-duration: 12s;"></div>
    <div class="glow-line" style="animation-delay: -5s; animation-direction: alternate-reverse;"></div>
    
    <div class="container">
        <header class="header">
            <div class="logo">IPNOTEC VIP</div>
            <div class="nav-links">
                <a href="#identity" class="nav-link">IDENTITY</a>
                <a href="#avatars" class="nav-link">AVATARS</a>
                <a href="#my-avatars" class="nav-link">MY AVATARS</a>
                <a href="#access" class="nav-link">ACCESS</a>
            </div>
        </header>
        
        <section class="hero-section">
            <h1 class="hero-title">FORGE YOUR FUTURE IDENTITY</h1>
            <p class="hero-subtitle">The future isn't something you wait for; it's something you build. Forge your digital soul, connect with your future tribe, and claim your place in the new reality.</p>
            <button class="cta-button" onclick="scrollToSection('identity')">BEGIN YOUR ASCENSION</button>
        </section>
        
        <section id="identity">
            <div class="terminal-box">
                <h2 class="terminal-title">Step 1: Authenticate Your Core Identity</h2>
                <div class="terminal-description">[Your Virtual IP (I-ID) is your unique, unforgeable key to the IPNOTEC ecosystem. It anchors your digital self to your real-world identity.]</div>
                
                <div class="input-group">
                    <label for="countryCode" class="input-label">Country Code:</label>
                    <select id="countryCode">
                        <option value="">Select Country</option>
                        <option value="54">Argentina (+54)</option>
                        <option value="61">Australia (+61)</option>
                        <option value="43">Austria (+43)</option>
                        <option value="32">Belgium (+32)</option>
                        <option value="55">Brazil (+55)</option>
                        <option value="1">Canada (+1)</option>
                        <option value="86">China (+86)</option>
                        <option value="45">Denmark (+45)</option>
                        <option value="20">Egypt (+20)</option>
                        <option value="358">Finland (+358)</option>
                        <option value="33">France (+33)</option>
                        <option value="49">Germany (+49)</option>
                        <option value="233">Ghana (+233)</option>
                        <option value="30">Greece (+30)</option>
                        <option value="852">Hong Kong (+852)</option>
                        <option value="91">India (+91)</option>
                        <option value="62">Indonesia (+62)</option>
                        <option value="353">Ireland (+353)</option>
                        <option value="972">Israel (+972)</option>
                        <option value="39">Italy (+39)</option>
                        <option value="81">Japan (+81)</option>
                        <option value="254">Kenya (+254)</option>
                        <option value="82">South Korea (+82)</option>
                        <option value="965">Kuwait (+965)</option>
                        <option value="60">Malaysia (+60)</option>
                        <option value="52">Mexico (+52)</option>
                        <option value="31">Netherlands (+31)</option>
                        <option value="64">New Zealand (+64)</option>
                        <option value="234">Nigeria (+234)</option>
                        <option value="47">Norway (+47)</option>
                        <option value="92">Pakistan (+92)</option>
                        <option value="63">Philippines (+63)</option>
                        <option value="48">Poland (+48)</option>
                        <option value="351">Portugal (+351)</option>
                        <option value="974">Qatar (+974)</option>
                        <option value="7">Russia (+7)</option>
                        <option value="966">Saudi Arabia (+966)</option>
                        <option value="65">Singapore (+65)</option>
                        <option value="27">South Africa (+27)</option>
                        <option value="34">Spain (+34)</option>
                        <option value="46">Sweden (+46)</option>
                        <option value="41">Switzerland (+41)</option>
                        <option value="886">Taiwan (+886)</option>
                        <option value="66">Thailand (+66)</option>
                        <option value="90">Turkey (+90)</option>
                        <option value="971">UAE (+971)</option>
                        <option value="44">United Kingdom (+44)</option>
                        <option value="1">United States (+1)</option>
                        <option value="84">Vietnam (+84)</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="phone" class="input-label">Phone Number:</label>
                    <input type="text" id="phone" placeholder="Enter phone number" inputmode="numeric" />
                </div>
                
                <div class="input-group">
                    <label for="dob" class="input-label">Date of Birth:</label>
                    <input type="date" id="dob" />
                </div>
                
                <button class="action-button" onclick="generateIID()">Generate Virtual IP</button>
                
                <div class="output" id="iidOutput">
                    <div>> Analyzing Biometric Vectors... DONE</div>
                    <div>> Calculating Phone Sum: <span id="phoneSum" class="number"></span></div>
                    <div>> Calculating DOB Sum: <span id="dobSum" class="number"></span></div>
                    <div>> Generating IPNOTEC CODE [IP-C]: <span id="ipcCode" class="number"></span></div>
                    <br>
                    <div>> Your Virtual IP (I-ID) is: <span id="finalIID" class="number"></span></div>
                    <div class="highlight">> Authentication Complete. This I-ID is now permanently bonded to you.</div>
                </div>
            </div>
        </section>
        
        <section id="avatars">
            <div class="terminal-box">
                <h2 class="terminal-title">Step 2: Forge Your Future Avatars</h2>
                <div class="terminal-description">[Your I-ID is singular. Your potential is not. Create any number of avatars to explore every facet of your ambition. Each avatar connects you to a unique Future Tribe.]</div>
                
                <div class="input-group">
                    <label for="username" class="input-label">IPNOTEC Username:</label>
                    <div class="availability-check">
                        <input type="text" id="username" placeholder="Enter your unique username" style="flex: 1;" />
                        <button class="random-btn" onclick="generateRandomUsername()">RANDOM</button>
                        <button class="action-button" onclick="checkUsername()" style="width: auto; margin-top: 0;">CHECK</button>
                    </div>
                    <div id="usernameStatus" class="availability-status"></div>
                </div>
                
                <div class="input-group">
                    <label for="avatarReason" class="input-label">1. Is this Avatar's purpose Professional, Personal, or Spiritual?</label>
                    <select id="avatarReason" onchange="updateQuestions()">
                        <option value="">Select Purpose</option>
                        <option value="PROFESSIONAL">Professional</option>
                        <option value="PERSONAL">Personal</option>
                        <option value="SPIRITUAL">Spiritual</option>
                    </select>
                </div>
                
                <div id="algorithmExplanation" class="algorithm-explanation" style="display: none;">
                    <h3>IPNOTEC Intelligence Algorithm:</h3>
                    <p id="explanationText"></p>
                </div>
                
                <div id="professionalQuestions" class="question-set" style="display: none;">
                    <div class="question-section">
                        <div class="question-title">1. What is your professional vision?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarPurposeProfessional" placeholder="e.g., To launch a sustainable tech startup, to build a global network of professionals, to revolutionize an industry..."></textarea>
                            <button class="random-btn" onclick="generateRandomPurpose('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">2. What professional resources do you seek?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarLookingForProfessional" placeholder="e.g., Seed funding and mentorship, collaborators for a project, industry connections..."></textarea>
                            <button class="random-btn" onclick="generateRandomAspiration('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">3. What is your primary professional strength?</div>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" id="avatarStrengthProfessional" placeholder="e.g., Strategic thinking, leadership, technical expertise..." style="flex: 1;" />
                            <button class="random-btn" onclick="generateRandomStrength('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">4. What professional challenge do you aim to overcome?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarChallengeProfessional" placeholder="e.g., Market competition, funding limitations, scaling challenges..."></textarea>
                            <button class="random-btn" onclick="generateRandomChallenge('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">5. What professional legacy do you want to leave?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarLegacyProfessional" placeholder="e.g., Industry innovation, company culture, mentorship programs..."></textarea>
                            <button class="random-btn" onclick="generateRandomLegacy('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">6. How do you measure professional success?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarSuccessProfessional" placeholder="e.g., Revenue growth, team size, market impact, awards..."></textarea>
                            <button class="random-btn" onclick="generateRandomSuccess('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">7. What is your professional timeline?</div>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" id="avatarTimelineProfessional" placeholder="e.g., 5-year plan, quarterly goals, milestone targets..." style="flex: 1;" />
                            <button class="random-btn" onclick="generateRandomTimeline('PROFESSIONAL')">RANDOM</button>
                        </div>
                    </div>
                </div>
                
                <div id="personalQuestions" class="question-set" style="display: none;">
                    <div class="question-section">
                        <div class="question-title">1. What is your personal growth vision?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarPurposePersonal" placeholder="e.g., To achieve work-life balance, to develop new skills, to build meaningful relationships..."></textarea>
                            <button class="random-btn" onclick="generateRandomPurpose('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">2. What personal resources do you seek?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarLookingForPersonal" placeholder="e.g., Supportive community, learning resources, wellness practices..."></textarea>
                            <button class="random-btn" onclick="generateRandomAspiration('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">3. What is your primary personal strength?</div>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" id="avatarStrengthPersonal" placeholder="e.g., Empathy, creativity, resilience..." style="flex: 1;" />
                            <button class="random-btn" onclick="generateRandomStrength('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">4. What personal challenge do you aim to overcome?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarChallengePersonal" placeholder="e.g., Self-doubt, time management, communication skills..."></textarea>
                            <button class="random-btn" onclick="generateRandomChallenge('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">5. What personal legacy do you want to leave?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarLegacyPersonal" placeholder="e.g., Strong family bonds, personal growth journey, positive impact on others..."></textarea>
                            <button class="random-btn" onclick="generateRandomLegacy('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">6. How do you measure personal success?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarSuccessPersonal" placeholder="e.g., Happiness, relationships, personal achievements..."></textarea>
                            <button class="random-btn" onclick="generateRandomSuccess('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">7. What is your approach to personal growth?</div>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" id="avatarApproachPersonal" placeholder="e.g., Daily habits, mindfulness practices, learning goals..." style="flex: 1;" />
                            <button class="random-btn" onclick="generateRandomApproach('PERSONAL')">RANDOM</button>
                        </div>
                    </div>
                </div>
                
                <div id="spiritualQuestions" class="question-set" style="display: none;">
                    <div class="question-section">
                        <div class="question-title">1. What is your spiritual vision?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarPurposeSpiritual" placeholder="e.g., To achieve inner peace, to understand universal consciousness, to serve humanity..."></textarea>
                            <button class="random-btn" onclick="generateRandomPurpose('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">2. What spiritual resources do you seek?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarLookingForSpiritual" placeholder="e.g., Meditation guidance, spiritual community, ancient wisdom..."></textarea>
                            <button class="random-btn" onclick="generateRandomAspiration('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">3. What is your primary spiritual strength?</div>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" id="avatarStrengthSpiritual" placeholder="e.g., Intuition, compassion, presence..." style="flex: 1;" />
                            <button class="random-btn" onclick="generateRandomStrength('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">4. What spiritual challenge do you aim to overcome?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarChallengeSpiritual" placeholder="e.g., Ego attachment, fear of the unknown, distraction..."></textarea>
                            <button class="random-btn" onclick="generateRandomChallenge('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">5. What spiritual legacy do you want to leave?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarLegacySpiritual" placeholder="e.g., Awakened consciousness, spiritual teachings, healing energy..."></textarea>
                            <button class="random-btn" onclick="generateRandomLegacy('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">6. How do you measure spiritual success?</div>
                        <div style="display: flex; gap: 1rem;">
                            <textarea id="avatarSuccessSpiritual" placeholder="e.g., Inner peace, connection to source, service to others..."></textarea>
                            <button class="random-btn" onclick="generateRandomSuccess('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                    
                    <div class="question-section">
                        <div class="question-title">7. What is your spiritual practice?</div>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" id="avatarPracticeSpiritual" placeholder="e.g., Meditation, prayer, energy work, rituals..." style="flex: 1;" />
                            <button class="random-btn" onclick="generateRandomPractice('SPIRITUAL')">RANDOM</button>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="futureName" class="input-label">This Avatar's Callsign:</label>
                    <div style="display: flex; gap: 1rem;">
                        <input type="text" id="futureName" placeholder="Enter a name for this avatar" style="flex: 1;" />
                        <button class="random-btn" onclick="generateRandomName()">RANDOM</button>
                    </div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">Choose Avatar's Future Tribe:</label>
                    <div class="color-options" id="tribeOptions">
                        <div class="color-option selected" style="background-color: var(--violet);" data-color="violet" data-code="VIP"><span class="color-tooltip">Venture & Wealth</span></div>
                        <div class="color-option" style="background-color: var(--indigo);" data-color="indigo" data-code="IPI"><span class="color-tooltip">IT & Industrialists</span></div>
                        <div class="color-option" style="background-color: var(--blue);" data-color="blue" data-code="IPB"><span class="color-tooltip">Branding & Marketing</span></div>
                        <div class="color-option" style="background-color: var(--green);" data-color="green" data-code="IPG"><span class="color-tooltip">Green & Environmental</span></div>
                        <div class="color-option" style="background-color: var(--yellow);" data-color="yellow" data-code="IPY"><span class="color-tooltip">Youth & Education</span></div>
                        <div class="color-option" style="background-color: var(--orange);" data-color="orange" data-code="IPO"><span class="color-tooltip">Culture & Arts</span></div>
                        <div class="color-option" style="background-color: var(--red);" data-color="red" data-code="IPR"><span class="color-tooltip">Real Estate & Recreation</span></div>
                        <div class="color-option" style="background-color: var(--white); border: 1px solid #555;" data-color="white" data-code="IPW"><span class="color-tooltip">Health & Policy</span></div>
                        <div class="color-option" style="background-color: var(--grey);" data-color="grey" data-code="IPGY"><span class="color-tooltip">Nomads & Curious</span></div>
                        <div class="color-option" style="background-color: var(--black-tribe); border: 1px solid #333;" data-color="black-tribe" data-code="IPBL"><span class="color-tooltip">Black Noting</span></div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="futureCity" class="input-label">Avatar's Base of Operations:</label>
                    <select id="futureCity">
                        <option value="">Select Future City</option>
                        <optgroup label="Indian Cities">
                            <option value="BLR">Bangalore (BLR)</option> <option value="BOM">Mumbai (BOM)</option> <option value="DEL">Delhi (DEL)</option> <option value="HYD">Hyderabad (HYD)</option> <option value="MAA">Chennai (MAA)</option> <option value="PNQ">Pune (PNQ)</option> <option value="CCU">Kolkata (CCU)</option> <option value="GOI">Goa (GOI)</option>
                        </optgroup>
                        <optgroup label="Global Cities">
                            <option value="DXB">Dubai (DXB)</option> <option value="SFO">San Francisco (SFO)</option> <option value="NYC">New York (NYC)</option> <option value="LON">London (LHR)</option> <option value="SIN">Singapore (SIN)</option> <option value="TOK">Tokyo (TOK)</option> <option value="SYD">Sydney (SYD)</option> <option value="BER">Berlin (BER)</option>
                        </optgroup>
                    </select>
                </div>
                
                <button class="action-button" onclick="generateAvatar()">Forge This Avatar</button>
                <div id="avatarList" class="avatar-list"></div>
            </div>
        </section>
        
        <!-- MY AVATARS Section -->
        <section id="my-avatars">
            <div class="terminal-box">
                <h2 class="terminal-title">My Avatars</h2>
                <div class="terminal-description">Your collection of forged identities. Each avatar connects to a unique "Future 11" chat room.</div>
                
                <div class="avatar-grid" id="avatar-container">
                    <!-- Avatars will be dynamically added here -->
                </div>
                
                <button class="action-button" onclick="scrollToSection('avatars')">Forge Another Avatar</button>
            </div>
        </section>
        
        <section id="access">
            <div class="terminal-box">
                <div class="final-cta-box" id="futureIdSection">
                    <h2 class="terminal-title">Step 4: Access the FUTURE11 Realm</h2>
                    <p class="terminal-description">Your avatar is ready. Connect with your Future11 tribe - 11 like-minded individuals chosen based on your avatar's purpose and aspirations.</p>
                    
                    <div class="user-id-output" id="futureIdOutput">
                        <div style="color: white;">YOUR IPNOTEC FUTURE ID IS:</div>
                        <div class="future-id-display">
                            <span class="future-id-part1" id="futureIdPart1"></span>.<span class="future-id-part2" id="futureIdPart2"></span>.<span class="future-id-part3" id="futureIdPart3"></span>
                        </div>
                    </div>
                    
                    <button id="enter-chat-button" class="action-button" onclick="enterChatRoom()">ENTER FUTURE11 REALM</button>
                </div>
            </div>
        </section>
        
        <!-- Chat Section -->
        <div id="chat-section">
            <div class="chat-header">
                <button class="home-button" onclick="goHome()">
                    <i class="fas fa-home"></i> Home
                </button>
                <h1 id="chat-club-code">IPNOTEC FUTURE11 REALM</h1>
                <p>Connect with your tribe of 11 like-minded individuals for focused discussions.</p>
                
                <div class="header-controls">
                    <button class="control-btn" id="extract-btn">
                        <i class="fas fa-chart-pie"></i> Extract Summary
                    </button>
                    <button class="control-btn" id="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Refresh Chat
                    </button>
                </div>
                
                <div class="refresh-info">
                    <i class="fas fa-clock"></i> Next refresh at <span id="next-refresh-time">10:01 PM</span>
                </div>
            </div>
            
            <div class="chat-container">
                <div class="participants-panel">
                    <h2>Future11 Tribe</h2>
                    <div class="participants" id="participants-list">
                        <!-- Participants will be populated here -->
                    </div>
                </div>
                
                <div class="chat-window">
                    <div class="chat-messages" id="chat-messages">
                        <!-- Messages will appear here -->
                    </div>
                    
                    <div class="chat-input">
                        <input type="text" id="message-input" placeholder="Share your vision with your tribe...">
                        <button id="send-button"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="footer">
            IPNOTEC MULTIVERSE SIMULATION â€¢ VERSION 10.1 â€¢ CONNECTION STABLE
        </footer>
    </div>

    <!-- Summary Modal -->
    <div class="modal" id="summary-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Discussion Summary Report</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>

            <div class="loading-spinner" id="summary-loading">Generating Summary...</div>
            
            <div class="summary-container" id="summary-content">
                <div class="summary-section">
                    <h3>Overall Summary</h3>
                    <p class="summary-text" id="discussion-summary"></p>
                </div>
                
                <div class="summary-section">
                    <h3>Overall Mood</h3>
                    <p class="mood-text" id="overall-mood"></p>
                </div>

                <div class="summary-section">
                    <h3>Highest Topics Discussed</h3>
                    <ul class="topics-list-ul" id="highest-topics"></ul>
                </div>

                <div class="summary-section">
                    <h3>Last 10 Messages</h3>
                    <ul class="point-list" id="summary-list">
                        <!-- Summary points will be added here -->
                    </ul>
                </div>
                
                <div class="chart-container">
                    <h3>Color Distribution</h3>
                    <canvas id="color-chart"></canvas>
                </div>
            </div>
            
            <div class="whatsapp-info">
                <h3><i class="fab fa-whatsapp"></i> WhatsApp Summary</h3>
                <p>Your 10-point summary and color distribution chart will be automatically sent to your WhatsApp at 10:01 AM/PM as part of our scheduled refresh.</p>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let selectedTribeCode = 'VIP';
        let selectedTribeColor = 'violet';
        let userFutureCity = '';
        let userFutureName = '';
        let userChatColor = 'blue';
        let userNameForChat = 'IPNOTEC User';
        let usernameAvailable = false;
        let currentIID = '';
        let avatars = JSON.parse(localStorage.getItem('ipnotecAvatars')) || [];
        let currentAvatarType = '';
        
        // Set global color for the UI
        function setGlobalColor(color) {
            document.documentElement.style.setProperty('--current-color', color);
        }
        
        // Scroll to section
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // Typewriter effect
        function typewriter(element, text, onComplete) {
            element.innerHTML = "";
            let i = 0;
            const interval = setInterval(() => {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                } else {
                    clearInterval(interval);
                    if (onComplete) onComplete();
                }
            }, 25);
        }
        
        // Digital root calculation
        function digitalRoot(num) {
            while (num >= 10) {
                num = num.toString().split('').reduce((a, b) => a + parseInt(b), 0);
            }
            return num;
        }
        
        // Validate and clean phone number
        function validatePhone(phone) {
            return phone.replace(/\D/g, ''); // Remove all non-digit characters
        }
        
        // Generate I-ID
        function generateIID() {
            const countryCode = document.getElementById('countryCode').value;
            const phone = validatePhone(document.getElementById('phone').value);
            const dobRaw = document.getElementById('dob').value;
            
            // Input validation
            if (!countryCode) {
                alert("Please select a country code.");
                return;
            }
            if (!phone) {
                alert("Please enter a valid phone number.");
                return;
            }
            if (!dobRaw) {
                alert("Please enter a valid Date of Birth.");
                return;
            }
            
            const phoneDigits = countryCode + phone;
            const phoneSum = phoneDigits.split('').reduce((sum, d) => sum + parseInt(d), 0);
            const phoneSingle = digitalRoot(phoneSum);
            
            const dobDigits = dobRaw.replace(/\D/g, '');
            const dobSum = dobDigits.split('').reduce((sum, d) => sum + parseInt(d), 0);
            const dobSingle = digitalRoot(dobSum);
            
            let ipc = dobSingle - phoneSingle;
            if (ipc < 0) ipc = 9 + ipc; // Ensure positive result for single digit
            
            const finalIID = phoneDigits + ipc;
            currentIID = finalIID;
            
            // Display results with typewriter effect
            const outputEl = document.getElementById('iidOutput');
            outputEl.classList.add('active');
            
            const outputText = `> Analyzing Biometric Vectors... DONE\n> Calculating Phone Sum: ${phoneSingle}\n> Calculating DOB Sum: ${dobSingle}\n> Generating IPNOTEC CODE [IP-C]: ${ipc}\n\n> Your Virtual IP (I-ID) is: ${finalIID}\n> Authentication Complete. This I-ID is now permanently bonded to you.`;
            
            typewriter(outputEl, outputText, () => {
                // Scroll to next section after typing completes
                document.getElementById('avatars').scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        }
        
        // Update questions based on selected avatar type
        function updateQuestions() {
            const avatarReason = document.getElementById('avatarReason').value;
            const algorithmExplanation = document.getElementById('algorithmExplanation');
            const explanationText = document.getElementById('explanationText');
            
            // Hide all question sets
            document.getElementById('professionalQuestions').style.display = 'none';
            document.getElementById('personalQuestions').style.display = 'none';
            document.getElementById('spiritualQuestions').style.display = 'none';
            
            // Show explanation and appropriate questions
            if (avatarReason) {
                algorithmExplanation.style.display = 'block';
                currentAvatarType = avatarReason;
                
                if (avatarReason === 'PROFESSIONAL') {
                    document.getElementById('professionalQuestions').style.display = 'block';
                    explanationText.innerHTML = "Professional avatars use a <span class='highlight'>time-bound algorithm</span> with structured outcomes. Your Future11 tribe will connect at specific intervals (10:01 AM/PM daily) for focused discussions with tangible outcomes. Summary extracts will be generated after each session to track progress and action items.";
                } else if (avatarReason === 'PERSONAL') {
                    document.getElementById('personalQuestions').style.display = 'block';
                    explanationText.innerHTML = "Personal avatars use a <span class='highlight'>flexible algorithm</span> focused on growth and well-being. Your Future11 tribe will connect based on mutual availability, with an emphasis on supportive conversations and personal development. Summaries will focus on insights and reflections rather than action items.";
                } else if (avatarReason === 'SPIRITUAL') {
                    document.getElementById('spiritualQuestions').style.display = 'block';
                    explanationText.innerHTML = "Spiritual avatars use a <span class='highlight'>self-directed algorithm</span> that adapts to your journey. Your Future11 tribe will connect when energies align, with discussions focused on consciousness expansion and universal wisdom. Summaries will capture transformative insights and synchronicities.";
                }
            } else {
                algorithmExplanation.style.display = 'none';
                currentAvatarType = '';
            }
        }
        
        // Check username availability
        function checkUsername() {
            const username = document.getElementById('username').value.trim();
            const statusElement = document.getElementById('usernameStatus');
            
            if (!username) {
                statusElement.textContent = "Please enter a username";
                statusElement.className = "availability-status";
                usernameAvailable = false;
                return;
            }
            
            // Simulate checking against a list of taken usernames
            const takenUsernames = ["quantum", "nexus", "zenith", "apex", "vector", "pulse", "orbit"];
            
            if (takenUsernames.includes(username.toLowerCase())) {
                statusElement.textContent = "Username not available";
                statusElement.className = "availability-status taken";
                usernameAvailable = false;
            } else {
                statusElement.textContent = "Username available";
                statusElement.className = "availability-status available";
                usernameAvailable = true;
            }
        }
        
        // Generate random username
        function generateRandomUsername() {
            const prefixes = ["Cyber", "Neuro", "Quantum", "Astro", "Bio", "Zero", "Echo", "Zen", "Orion", "Nova", "Apex", "Rogue"];
            const middles = ["Core", "Link", "Sync", "Byte", "Flux", "Mind", "Grid", "Pulse", "Shift", "Gen", "Wave", "Blade"];
            const suffixes = ["X", "7", "Prime", "One", "AI", "OS", "VI", "IO", "MKII", "Max", "9000", "Zero"];
            
            const randomName = prefixes[Math.floor(Math.random() * prefixes.length)] + 
                              middles[Math.floor(Math.random() * middles.length)] + 
                              suffixes[Math.floor(Math.random() * suffixes.length)];
            
            document.getElementById('username').value = randomName;
            checkUsername();
        }
        
        // Tribe selection
        document.addEventListener('DOMContentLoaded', function() {
            const colorOptions = document.querySelectorAll('#tribeOptions .color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    selectedTribeCode = this.dataset.code;
                    selectedTribeColor = this.dataset.color;
                    setGlobalColor(getComputedStyle(this).backgroundColor);
                });
            });
            
            // Set default selected color
            const defaultColorOption = document.querySelector('#tribeOptions .color-option[data-color="violet"]');
            if (defaultColorOption) {
                defaultColorOption.classList.add('selected');
                selectedTribeCode = defaultColorOption.dataset.code;
                selectedTribeColor = defaultColorOption.dataset.color;
                setGlobalColor(getComputedStyle(defaultColorOption).backgroundColor);
            }
            
            // Set max date for DOB to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dob').setAttribute('max', today);
            
            // Render existing avatars
            renderAvatarGrid();
        });
        
        // Random name generators
        function generateRandomName() {
            const randomNames = {
                violet: ["Venture", "Innovate", "Wealth", "Capital", "Insight", "Prosper", "Dynasty"],
                indigo: ["TechMind", "Circuit", "Industrial", "Binary", "Processor", "Engineer", "Innovator"],
                blue: ["Brand", "Market", "Vision", "Campaign", "Strategy", "Impact", "Connect"],
                green: ["EcoMind", "Sustain", "Greenova", "Biotech", "Harvest", "Renew", "Planet"],
                yellow: ["YouthFlux", "Edunova", "Spark", "GenZ", "FutureEdu", "Catalyst", "BrightMind"],
                orange: ["Oracle", "Culture", "Legacy", "Tradition", "Wisdom", "Heritage", "Revive"],
                red: ["Realty", "Leisure", "Estate", "Architect", "Vibes", "Resort", "Harmony"],
                white: ["Health", "Policy", "Wellbeing", "Govern", "Equity", "Care", "Regulate"],
                grey: ["Nomad", "Curious", "Explorer", "Wanderer", "Seeker", "Observer", "Traveler"],
                'black-tribe': ["Void", "Abyss", "Onyx", "Shadow", "Eclipse", "Midnight", "Obsidian"]
            };
            
            const names = randomNames[selectedTribeColor] || ["Quantum", "Nexus", "Zenith"];
            const randomName = names[Math.floor(Math.random() * names.length)];
            document.getElementById('futureName').value = randomName;
        }
        
        // Random question generators for each avatar type
        function generateRandomPurpose(type) {
            const purposes = {
                PROFESSIONAL: [
                    "To create a sustainable future through technology",
                    "To bridge the gap between innovation and market needs",
                    "To revolutionize an industry with disruptive solutions",
                    "To build a globally recognized brand",
                    "To create economic opportunities in emerging markets"
                ],
                PERSONAL: [
                    "To achieve work-life balance and personal fulfillment",
                    "To develop new skills and expand my capabilities",
                    "To build meaningful relationships and connections",
                    "To create a lifestyle that aligns with my values",
                    "To explore my passions and creative expressions"
                ],
                SPIRITUAL: [
                    "To achieve inner peace and enlightenment",
                    "To understand the nature of consciousness",
                    "To serve humanity with compassion and wisdom",
                    "To connect with universal energy and source",
                    "To explore the mysteries of existence"
                ]
            };
            const randomPurpose = purposes[type][Math.floor(Math.random() * purposes[type].length)];
            document.getElementById(`avatarPurpose${type}`).value = randomPurpose;
        }
        
        function generateRandomAspiration(type) {
            const aspirations = {
                PROFESSIONAL: [
                    "Funding for a breakthrough technology",
                    "A team of experts to scale my venture",
                    "Mentorship from industry leaders",
                    "Global partnerships for market expansion",
                    "Resources to develop a prototype"
                ],
                PERSONAL: [
                    "A supportive community for personal growth",
                    "Learning resources to develop new skills",
                    "Guidance for life transformation",
                    "Wellness practices for balance",
                    "Connections with like-minded individuals"
                ],
                SPIRITUAL: [
                    "Guidance from enlightened teachers",
                    "A community for spiritual practice",
                    "Ancient wisdom texts and teachings",
                    "Retreat spaces for deep meditation",
                    "Energy healing tools and techniques"
                ]
            };
            const randomAspiration = aspirations[type][Math.floor(Math.random() * aspirations[type].length)];
            document.getElementById(`avatarLookingFor${type}`).value = randomAspiration;
        }
        
        function generateRandomStrength(type) {
            const strengths = {
                PROFESSIONAL: [
                    "Strategic foresight",
                    "Leadership capabilities",
                    "Technical expertise",
                    "Problem-solving skills",
                    "Innovation mindset"
                ],
                PERSONAL: [
                    "Empathetic communication",
                    "Creative expression",
                    "Resilience in challenges",
                    "Adaptability to change",
                    "Emotional intelligence"
                ],
                SPIRITUAL: [
                    "Intuitive perception",
                    "Compassionate service",
                    "Mindful presence",
                    "Energy sensitivity",
                    "Universal connection"
                ]
            };
            const randomStrength = strengths[type][Math.floor(Math.random() * strengths[type].length)];
            document.getElementById(`avatarStrength${type}`).value = randomStrength;
        }
        
        function generateRandomChallenge(type) {
            const challenges = {
                PROFESSIONAL: [
                    "Navigating market competition",
                    "Securing adequate funding",
                    "Building the right team",
                    "Scaling operations efficiently",
                    "Adapting to industry changes"
                ],
                PERSONAL: [
                    "Overcoming self-limiting beliefs",
                    "Managing time effectively",
                    "Maintaining work-life balance",
                    "Developing consistent habits",
                    "Communicating needs clearly"
                ],
                SPIRITUAL: [
                    "Transcending ego identification",
                    "Releasing attachment to outcomes",
                    "Maintaining practice consistency",
                    "Integrating spiritual insights into daily life",
                    "Navigating the dark night of the soul"
                ]
            };
            const randomChallenge = challenges[type][Math.floor(Math.random() * challenges[type].length)];
            document.getElementById(`avatarChallenge${type}`).value = randomChallenge;
        }
        
        function generateRandomLegacy(type) {
            const legacies = {
                PROFESSIONAL: [
                    "Creating systems that empower future generations",
                    "Establishing new industry standards",
                    "Mentoring the next wave of innovators",
                    "Building a sustainable business model",
                    "Transforming how people work and live"
                ],
                PERSONAL: [
                    "Strong family bonds and relationships",
                    "A personal growth journey that inspires others",
                    "Positive impact on my community",
                    "A life lived with authenticity and purpose",
                    "Memories and experiences that enrich others"
                ],
                SPIRITUAL: [
                    "Awakened consciousness in others",
                    "Spiritual teachings that transcend time",
                    "Healing energy that transforms communities",
                    "A portal to higher dimensions of being",
                    "A legacy of unconditional love and service"
                ]
            };
            const randomLegacy = legacies[type][Math.floor(Math.random() * legacies[type].length)];
            document.getElementById(`avatarLegacy${type}`).value = randomLegacy;
        }
        
        function generateRandomSuccess(type) {
            const successMetrics = {
                PROFESSIONAL: [
                    "Revenue growth and profitability",
                    "Market share and industry impact",
                    "Team size and talent retention",
                    "Innovation patents and IP created",
                    "Awards and industry recognition"
                ],
                PERSONAL: [
                    "Happiness and life satisfaction",
                    "Quality of relationships and connections",
                    "Personal achievements and milestones",
                    "Health and well-being indicators",
                    "Learning and growth experiences"
                ],
                SPIRITUAL: [
                    "Inner peace and contentment",
                    "Depth of connection to source",
                    "Service to others and compassion",
                    "Clarity of purpose and meaning",
                    "Freedom from suffering and attachment"
                ]
            };
            const randomSuccess = successMetrics[type][Math.floor(Math.random() * successMetrics[type].length)];
            document.getElementById(`avatarSuccess${type}`).value = randomSuccess;
        }
        
        function generateRandomTimeline() {
            const timelines = [
                "5-year expansion plan with quarterly milestones",
                "3-phase development with 6-month intervals",
                "Annual growth targets with monthly reviews",
                "10-year vision with yearly strategic objectives",
                "Project-based roadmap with specific deadlines"
            ];
            document.getElementById('avatarTimelineProfessional').value = timelines[Math.floor(Math.random() * timelines.length)];
        }
        
        function generateRandomApproach() {
            const approaches = [
                "Daily meditation and mindfulness practices",
                "Weekly learning sessions and skill development",
                "Regular self-reflection and journaling",
                "Balance between work, rest, and play",
                "Continuous improvement through feedback"
            ];
            document.getElementById('avatarApproachPersonal').value = approaches[Math.floor(Math.random() * approaches.length)];
        }
        
        function generateRandomPractice() {
            const practices = [
                "Daily meditation and energy work",
                "Prayer and connection with divine source",
                "Yoga and movement as spiritual practice",
                "Nature immersion and earth connection",
                "Service to others as spiritual devotion"
            ];
            document.getElementById('avatarPracticeSpiritual').value = practices[Math.floor(Math.random() * practices.length)];
        }
        
        // Generate avatar with animated summary
        function generateAvatar() {
            if (!usernameAvailable) {
                alert("Please choose an available username first.");
                return;
            }
            
            if (!currentAvatarType) {
                alert("Please select an avatar purpose first.");
                return;
            }
            
            let purpose, lookingFor, strength, challenge, legacy, success, additionalField;
            
            if (currentAvatarType === 'PROFESSIONAL') {
                purpose = document.getElementById('avatarPurposeProfessional').value.trim();
                lookingFor = document.getElementById('avatarLookingForProfessional').value.trim();
                strength = document.getElementById('avatarStrengthProfessional').value.trim();
                challenge = document.getElementById('avatarChallengeProfessional').value.trim();
                legacy = document.getElementById('avatarLegacyProfessional').value.trim();
                success = document.getElementById('avatarSuccessProfessional').value.trim();
                additionalField = document.getElementById('avatarTimelineProfessional').value.trim();
            } else if (currentAvatarType === 'PERSONAL') {
                purpose = document.getElementById('avatarPurposePersonal').value.trim();
                lookingFor = document.getElementById('avatarLookingForPersonal').value.trim();
                strength = document.getElementById('avatarStrengthPersonal').value.trim();
                challenge = document.getElementById('avatarChallengePersonal').value.trim();
                legacy = document.getElementById('avatarLegacyPersonal').value.trim();
                success = document.getElementById('avatarSuccessPersonal').value.trim();
                additionalField = document.getElementById('avatarApproachPersonal').value.trim();
            } else if (currentAvatarType === 'SPIRITUAL') {
                purpose = document.getElementById('avatarPurposeSpiritual').value.trim();
                lookingFor = document.getElementById('avatarLookingForSpiritual').value.trim();
                strength = document.getElementById('avatarStrengthSpiritual').value.trim();
                challenge = document.getElementById('avatarChallengeSpiritual').value.trim();
                legacy = document.getElementById('avatarLegacySpiritual').value.trim();
                success = document.getElementById('avatarSuccessSpiritual').value.trim();
                additionalField = document.getElementById('avatarPracticeSpiritual').value.trim();
            }
            
            const futureName = document.getElementById('futureName').value.trim();
            const futureCity = document.getElementById('futureCity').value;
            
            if (!purpose || !lookingFor || !strength || !challenge || !legacy || !success || !additionalField || !futureName || !futureCity) { 
                alert("Please complete all fields for your avatar."); 
                return; 
            }
            
            const avatarIdString = `${selectedTribeCode}.${futureCity}.${futureName}`;
            
            // Create avatar object
            const avatar = {
                id: avatarIdString,
                name: futureName,
                city: futureCity,
                tribe: selectedTribeCode,
                color: selectedTribeColor,
                reason: currentAvatarType,
                purpose: purpose,
                lookingFor: lookingFor,
                strength: strength,
                challenge: challenge,
                legacy: legacy,
                success: success,
                additional: additionalField,
                timestamp: new Date().toISOString(),
                interactions: []
            };
            
            // Add to avatars array and save to localStorage
            avatars.push(avatar);
            localStorage.setItem('ipnotecAvatars', JSON.stringify(avatars));
            
            // Display success message with typewriter effect
            const avatarList = document.getElementById('avatarList');
            const avatarCard = document.createElement('div');
            avatarCard.className = 'avatar-card';
            
            // Get the color value for the border
            const colorElement = document.querySelector(`.color-option[data-color="${selectedTribeColor}"]`);
            const colorValue = getComputedStyle(colorElement).backgroundColor;
            avatarCard.style.borderColor = colorValue;
            
            // Create summary text with typewriter effect
            let summaryText = '';
            if (currentAvatarType === 'PROFESSIONAL') {
                summaryText = `This professional avatar seeks ${lookingFor} with the goal to ${purpose}. Its primary strength is ${strength} and it aims to overcome ${challenge}. It wants to leave a legacy of ${legacy} and measures success by ${success}. Timeline: ${additionalField}.`;
            } else if (currentAvatarType === 'PERSONAL') {
                summaryText = `This personal avatar seeks ${lookingFor} with the goal to ${purpose}. Its primary strength is ${strength} and it aims to overcome ${challenge}. It wants to leave a legacy of ${legacy} and measures success by ${success}. Approach: ${additionalField}.`;
            } else if (currentAvatarType === 'SPIRITUAL') {
                summaryText = `This spiritual avatar seeks ${lookingFor} with the goal to ${purpose}. Its primary strength is ${strength} and it aims to overcome ${challenge}. It wants to leave a legacy of ${legacy} and measures success by ${success}. Practice: ${additionalField}.`;
            }
            
            avatarCard.innerHTML = `
                <div class="avatar-summary" id="avatar-summary-${avatars.length}"></div>
                <div class="avatar-id"> 
                    ${avatarIdString} 
                </div>
            `;
            
            document.getElementById('avatarList').appendChild(avatarCard);
            
            // Apply typewriter effect to the summary
            const summaryElement = document.getElementById(`avatar-summary-${avatars.length}`);
            typewriter(summaryElement, summaryText, () => {
                // After typing completes, add a summary tab button
                const summaryTab = document.createElement('div');
                summaryTab.className = 'avatar-summary-tab';
                summaryTab.id = `summary-tab-${avatars.length}`;
                summaryTab.innerHTML = `
                    <div class="summary-tab-header">
                        <div class="summary-tab-title">Interaction Summary</div>
                        <button class="toggle-summary-btn" onclick="toggleSummaryTab(${avatars.length - 1})">Hide</button>
                    </div>
                    <div class="summary-tab-content">
                        <p>This avatar has not yet interacted with its Future11 tribe. Connect to start building your summary.</p>
                    </div>
                `;
                avatarCard.appendChild(summaryTab);
            });
            
            // Store values for chat
            userFutureCity = futureCity;
            userFutureName = futureName;
            
            // Format the Future ID for display
            document.getElementById('futureIdPart1').textContent = selectedTribeCode;
            document.getElementById('futureIdPart2').textContent = futureCity;
            document.getElementById('futureIdPart3').textContent = futureName;
            
            // Apply color to parts
            document.querySelector('.future-id-part1').style.color = colorValue;
            document.querySelector('.future-id-part2').style.color = colorValue;
            
            // Show the Future ID
            document.getElementById('futureIdOutput').classList.add('active');
            
            // Update the avatar grid
            renderAvatarGrid();
            
            // Scroll to next section
            document.getElementById('my-avatars').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // Toggle summary tab
        function toggleSummaryTab(avatarIndex) {
            const summaryTab = document.getElementById(`summary-tab-${avatarIndex + 1}`);
            const button = summaryTab.querySelector('.toggle-summary-btn');
            
            if (summaryTab.classList.contains('active')) {
                summaryTab.classList.remove('active');
                button.textContent = 'Show Summary';
            } else {
                summaryTab.classList.add('active');
                button.textContent = 'Hide';
                
                // Update summary content with actual data if available
                const avatar = avatars[avatarIndex];
                if (avatar && avatar.interactions && avatar.interactions.length > 0) {
                    let summaryContent = `<p><span class="highlight">Total Interactions:</span> ${avatar.interactions.length}</p>`;
                    summaryContent += `<p><span class="highlight">Last Interaction:</span> ${new Date(avatar.interactions[avatar.interactions.length - 1].timestamp).toLocaleDateString()}</p>`;
                    summaryContent += `<p><span class="highlight">Key Topics:</span> ${getTopTopics(avatar.interactions).join(', ')}</p>`;
                    
                    summaryTab.querySelector('.summary-tab-content').innerHTML = summaryContent;
                }
            }
        }
        
        // Get top topics from interactions
        function getTopTopics(interactions) {
            const topicCount = {};
            interactions.forEach(interaction => {
                if (interaction.topics) {
                    interaction.topics.forEach(topic => {
                        topicCount[topic] = (topicCount[topic] || 0) + 1;
                    });
                }
            });
            
            return Object.entries(topicCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3)
                .map(entry => entry[0]);
        }
        
        // Render avatar grid
        function renderAvatarGrid() {
            const container = document.getElementById('avatar-container');
            container.innerHTML = '';
            
            if (avatars.length === 0) {
                container.innerHTML = '<p class="description">No avatars forged yet. Create one to begin your journey.</p>';
                return;
            }
            
            avatars.forEach((avatar, index) => {
                const card = document.createElement('div');
                card.className = 'avatar-card-grid';
                card.style.animationDelay = `${index * 100}ms`;
                
                // Get color value for styling
                const colorMap = {
                    violet: '#8F00F0',
                    indigo: '#0070B0',
                    blue: '#00B0F0',
                    green: '#45DE10',
                    yellow: '#FFF000',
                    orange: '#FF6900',
                    red: '#FF000F',
                    white: '#FFFFFF',
                    grey: '#707070',
                    'black-tribe': '#000000'
                };
                
                const accentColor = colorMap[avatar.color] || '#00B0F0';
                card.style.borderColor = accentColor;
                card.style.boxShadow = `0 0 15px ${accentColor}`;
                
                card.innerHTML = `
                    <div class="avatar-color-header" style="background-color: ${accentColor}; color: ${avatar.color === 'black-tribe' ? 'white' : 'black'};">${avatar.tribe}</div>
                    <div class="avatar-details">
                        <div class="avatar-name">${avatar.name}</div>
                        <div class="avatar-id-grid" style="color: ${accentColor};">${avatar.id}</div>
                        <p class="avatar-purpose">Directive: ${avatar.reason}</p>
                    </div>
                    <div class="avatar-actions">
                        <button class="avatar-action-btn glow" style="color:${accentColor}; border-color:${accentColor};" onclick="enterChatRoomWithAvatar('${avatar.id}')">
                            <i class="fas fa-comments"></i> Connect to Future 11
                        </button>
                        <button class="avatar-action-btn" style="color:${accentColor}; border-color:${accentColor};" onclick="toggleSummaryTab(${index})">
                            <i class="fas fa-chart-bar"></i> Summary
                        </button>
                    </div>
                    <div class="avatar-summary-tab" id="summary-tab-${index + 1}">
                        <div class="summary-tab-header">
                            <div class="summary-tab-title">Interaction Summary</div>
                            <button class="toggle-summary-btn" onclick="toggleSummaryTab(${index})">Hide</button>
                        </div>
                        <div class="summary-tab-content">
                            <p>This avatar has not yet interacted with its Future11 tribe. Connect to start building your summary.</p>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        // Enter chat room with specific avatar
        function enterChatRoomWithAvatar(avatarId) {
            const avatar = avatars.find(a => a.id === avatarId);
            if (!avatar) return;
            
            // Set the current avatar details
            selectedTribeCode = avatar.tribe;
            selectedTribeColor = avatar.color;
            userFutureCity = avatar.city;
            userFutureName = avatar.name;
            currentAvatarType = avatar.reason;
            
            // Format the Future ID for display
            document.getElementById('futureIdPart1').textContent = selectedTribeCode;
            document.getElementById('futureIdPart2').textContent = userFutureCity;
            document.getElementById('futureIdPart3').textContent = userFutureName;
            
            // Apply color to parts
            const colorMap = {
                violet: '#8F00F0',
                indigo: '#0070B0',
                blue: '#00B0F0',
                green: '#45DE10',
                yellow: '#FFF000',
                orange: '#FF6900',
                red: '#FF000F',
                white: '#FFFFFF',
                grey: '#707070',
                'black-tribe': '#000000'
            };
            
            const colorValue = colorMap[selectedTribeColor] || '#00B0F0';
            document.querySelector('.future-id-part1').style.color = colorValue;
            document.querySelector('.future-id-part2').style.color = colorValue;
            
            // Show the Future ID
            document.getElementById('futureIdOutput').classList.add('active');
            
            // Enter the chat room
            enterChatRoom();
        }
        
        // --- Chat Room Logic ---
        const botNames = ["QuantumX", "NovaNode", "CyberSynth", "FutureTech", "VortexMind", "ApexVision", "ZenithFlow", "NexusPrime", "EchoSphere", "OrbitCore"];
        const chatColors = ["violet", "indigo", "blue", "green", "yellow", "orange", "red", "white", "grey", "black-tribe"];
        let messages = [];
        let participants = new Set();
        let nextRefreshTime;
        
        // Function to switch to chat section
        function enterChatRoom() {
            document.getElementById('identity').style.display = 'none';
            document.getElementById('avatars').style.display = 'none';
            document.getElementById('my-avatars').style.display = 'none';
            document.getElementById('access').style.display = 'none';
            document.getElementById('chat-section').style.display = 'flex';
            
            // Update the chat room title with the user's Future City
            document.getElementById('chat-club-code').textContent = `IPNOTEC FUTURE11 REALM | ${userFutureCity}`;
            
            initChat(); // Initialize chat functionalities
        }

        // Update username for chat based on selected tribe color
        function getChatUsername() {
            const colorNames = {
                violet: "Venture Visionary",
                indigo: "Indigo Innovator",
                blue: "Blue Strategist",
                green: "Green Entrepreneur",
                yellow: "Yellow Pioneer",
                orange: "Orange Creator",
                red: "Red Disruptor",
                white: "White Strategist", 
                grey: "Grey Analyst",
                'black-tribe': "Black Noter" 
            };
            return `${userFutureName} (${colorNames[selectedTribeColor] || "IPNOTEC User"})`;
        }
        
        // Render participants list
        function renderParticipants() {
            const container = document.getElementById("participants-list");
            container.innerHTML = "";
            
            // Add user
            const userElement = document.createElement("div");
            userElement.className = `participant ${selectedTribeColor}`;
            userElement.innerHTML = `<strong>You</strong> <span style="opacity:0.7">(${getChatUsername()})</span>`;
            container.appendChild(userElement);
            
            // Add 10 bots (FUTURE11)
            for (let i = 0; i < 10; i++) {
                const botName = botNames[i];
                const randomColor = chatColors[Math.floor(Math.random() * chatColors.length)];
                
                const element = document.createElement("div");
                element.className = `participant ${randomColor}`;
                element.textContent = botName;
                container.appendChild(element);
                
                participants.add(botName);
            }
        }
        
        // Add a message to the chat
        function addMessage(sender, text, color, isUser = false) {
            const timestamp = new Date();
            messages.push({ sender, text, color, timestamp, isUser });
            renderMessages();
            
            const messagesContainer = document.getElementById("chat-messages");
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Add a system message
        function addSystemMessage(text) {
            const element = document.createElement("div");
            element.className = "message system-message";
            element.innerHTML = `<div style="text-align: center; color: var(--yellow); padding: 10px; border-radius: 10px; background: rgba(255,255,0,0.1);">${text}</div>`;
            document.getElementById("chat-messages").appendChild(element);
            const messagesContainer = document.getElementById("chat-messages");
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Add a bot message
        function addBotMessage(text) {
            const botIndex = Math.floor(Math.random() * botNames.length);
            const botName = botNames[botIndex];
            const randomColor = chatColors[Math.floor(Math.random() * chatColors.length)];
            addMessage(botName, text, randomColor);
        }
        
        // Add a random bot message
        function addRandomBotMessage() {
            const topics = {
                PROFESSIONAL: [
                    "What are your thoughts on blockchain in supply chain management?",
                    "I believe AI will disrupt traditional marketing strategies",
                    "Looking for co-founders with tech background for my startup",
                    "Sustainability is key in modern business models",
                    "We just secured seed funding for our health tech startup",
                    "The future of work is definitely remote-first",
                    "Impact investing is gaining serious traction these days",
                    "How do you all handle work-life balance as entrepreneurs?",
                    "We're launching our MVP next week - any advice?",
                    "What industries do you think are most ripe for disruption?"
                ],
                PERSONAL: [
                    "How do you maintain motivation during challenging times?",
                    "What personal development books have impacted you most?",
                    "I'm working on improving my communication skills",
                    "How do you balance personal goals with family responsibilities?",
                    "What wellness practices do you incorporate daily?",
                    "I'm exploring new hobbies to expand my perspective",
                    "How do you handle stress and prevent burnout?",
                    "What relationships have been most transformative for you?",
                    "I'm working on creating better boundaries in my life",
                    "How do you define success in your personal life?"
                ],
                SPIRITUAL: [
                    "What meditation practices have you found most effective?",
                    "How do you integrate spiritual insights into daily life?",
                    "I've been experiencing powerful synchronicities lately",
                    "What role does gratitude play in your spiritual practice?",
                    "How do you navigate the dark night of the soul?",
                    "I'm exploring different energy healing modalities",
                    "What ancient wisdom traditions resonate with you?",
                    "How do you maintain higher consciousness in challenging situations?",
                    "I'm working on dissolving ego identification",
                    "What does spiritual community mean to you?"
                ]
            };
            
            const randomTopic = topics[currentAvatarType][Math.floor(Math.random() * topics[currentAvatarType].length)];
            addBotMessage(randomTopic);
        }
        
        // Render all messages
        function renderMessages() {
            const container = document.getElementById("chat-messages");
            container.innerHTML = "";
            
            messages.forEach(msg => {
                const messageElement = document.createElement("div");
                messageElement.className = `message ${msg.isUser ? "user-message" : "bot-message"}`;
                
                const hours = msg.timestamp.getHours().toString().padStart(2, "0");
                const minutes = msg.timestamp.getMinutes().toString().padStart(2, "0");
                const timeString = `${hours}:${minutes}`;
                
                messageElement.innerHTML = `
                    <div class="username" style="color: var(--${msg.color})">
                        <i class="fas fa-user"></i> ${msg.sender}
                    </div>
                    <div class="message-text">${msg.text}</div>
                    <div class="message-time">${timeString}</div>
                `;
                container.appendChild(messageElement);
            });
        }
        
        // Setup chat refresh schedule
        function setupRefreshSchedule() {
            const now = new Date();
            const nextAM = new Date(now);
            nextAM.setHours(10, 1, 0, 0); // 10:01 AM
            
            const nextPM = new Date(now);
            nextPM.setHours(22, 1, 0, 0); // 10:01 PM
            
            if (now < nextAM) {
                nextRefreshTime = nextAM;
            } else if (now < nextPM) {
                nextRefreshTime = nextPM;
            } else {
                nextAM.setDate(nextAM.getDate() + 1); // Move to next day's 10:01 AM
                nextRefreshTime = nextAM;
            }
            
            document.getElementById("next-refresh-time").textContent = 
                formatTime(nextRefreshTime.getHours(), nextRefreshTime.getMinutes());
            
            const timeUntilRefresh = nextRefreshTime.getTime() - now.getTime();
            setTimeout(performChatRefresh, timeUntilRefresh);
        }
        
        // Format time for display
        function formatTime(hours, minutes) {
            const period = hours >= 12 ? "PM" : "AM";
            const displayHours = hours % 12 || 12;
            return `${displayHours}:${minutes.toString().padStart(2, "0")} ${period}`;
        }
        
        // Perform chat refresh
        function performChatRefresh() {
            messages = [];
            renderMessages();
            addSystemMessage("Chat refreshed at " + new Date().toLocaleTimeString());
            addSystemMessage("Summary of previous discussion sent to your WhatsApp");
            setupRefreshSchedule(); // Schedule next refresh
        }
        
        // Extract summary and show modal
        async function extractSummary() {
            // Show loading spinner and hide content
            document.getElementById('summary-loading').style.display = 'block';
            document.getElementById('summary-content').style.display = 'none';
            document.getElementById("summary-modal").style.display = "flex";

            // Simulate API call delay
            setTimeout(() => {
                // Hide loading spinner and show content
                document.getElementById('summary-loading').style.display = 'none';
                document.getElementById('summary-content').style.display = 'flex';
                
                // Populate with mock data
                document.getElementById('discussion-summary').innerText = "The tribe discussed various entrepreneurial topics with a focus on technology innovation, sustainable business models, and future trends. There was strong interest in AI applications and blockchain technology.";
                document.getElementById('overall-mood').innerText = "Positive, Collaborative, Forward-thinking";
                
                const topicsListElement = document.getElementById('highest-topics');
                topicsListElement.innerHTML = '';
                ["Artificial Intelligence", "Sustainable Business", "Future Tech Trends"].forEach(topic => {
                    const li = document.createElement('li');
                    li.textContent = topic;
                    topicsListElement.appendChild(li);
                });

                // Always populate last 10 messages and chart
                const summaryMessages = messages.slice(-10); 
                const summaryList = document.getElementById("summary-list");
                summaryList.innerHTML = "";
                
                summaryMessages.forEach((msg, index) => {
                    const li = document.createElement("li");
                    li.innerHTML = `<strong>${msg.sender}:</strong> ${msg.text}`;
                    summaryList.appendChild(li);
                });
                
                const colorCounts = {};
                chatColors.forEach(color => colorCounts[color] = 0);
                messages.forEach(msg => {
                    if (colorCounts.hasOwnProperty(msg.color)) {
                        colorCounts[msg.color]++;
                    }
                });
                
                const chartData = {
                    labels: Object.keys(colorCounts).map(color => {
                        if (color === 'black-tribe') return 'Black Noting';
                        return color.charAt(0).toUpperCase() + color.slice(1);
                    }),
                    datasets: [{
                        data: Object.values(colorCounts),
                        backgroundColor: [
                            'rgba(143, 0, 240, 0.7)',  // violet
                            'rgba(0, 112, 176, 0.7)',   // indigo
                            'rgba(0, 176, 240, 0.7)',  // blue
                            'rgba(69, 222, 16, 0.7)',  // green
                            'rgba(255, 240, 0, 0.7)',  // yellow
                            'rgba(255, 105, 0, 0.7)',  // orange
                            'rgba(255, 0, 15, 0.7)',    // red
                            'rgba(255, 255, 255, 0.7)',// white
                            'rgba(112, 112, 112, 0.7)',// grey
                            'rgba(0, 0, 0, 0.7)'       // black-tribe
                        ],
                        borderColor: [
                            'rgba(143, 0, 240, 1)',
                            'rgba(0, 112, 176, 1)',
                            'rgba(0, 176, 240, 1)',
                            'rgba(69, 222, 16, 1)',
                            'rgba(255, 240, 0, 1)',
                            'rgba(255, 105, 0, 1)',
                            'rgba(255, 0, 15, 1)',
                            'rgba(255, 255, 255, 1)',
                            'rgba(112, 112, 112, 1)',
                            'rgba(0, 0, 0, 1)'
                        ],
                        borderWidth: 2
                    }]
                };
                
                const ctx = document.getElementById('color-chart').getContext('2d');
                if (window.colorChart) {
                    window.colorChart.destroy();
                }
                
                window.colorChart = new Chart(ctx, {
                    type: 'pie',
                    data: chartData,
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    color: 'white',
                                    font: {
                                        family: "'Rajdhani', sans-serif",
                                        size: 14
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.raw || 0;
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = Math.round((value / total) * 100);
                                        return `${label}: ${value} messages (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }, 1500);
        }

        // Initialize chat (called after Future ID is generated)
        function initChat() {
            // Add user and bots to participants
            participants.add("You");
            botNames.forEach(bot => participants.add(bot));
            renderParticipants();
            
            // Initial system messages for chat
            addSystemMessage("Welcome to IPNOTEC Future11 Realm! Connect with your tribe of 11 like-minded individuals.");
            addSystemMessage("This is your dedicated space for focused discussions on entrepreneurship and innovation.");
            addSystemMessage("Chat refreshes twice daily at 10:01 AM/PM. Summary sent to WhatsApp.");
            
            // Simulate initial bot messages
            setTimeout(() => addBotMessage("Greetings everyone! Excited to connect with this Future11 tribe."), 1000);
            setTimeout(() => addBotMessage("What's everyone working on these days?"), 3000);
            setTimeout(() => addBotMessage("I'm exploring applications of AI in sustainable agriculture"), 5000);
            setTimeout(() => addBotMessage("Just launched a new platform for digital artists"), 7000);
            setTimeout(() => addBotMessage("Looking for collaborators in the Web3 space"), 9000);
            
            setupRefreshSchedule(); // Set up chat refresh timer
            setInterval(addRandomBotMessage, 15000); // Add random bot messages periodically
        }

        // Navigation functions
        function goHome() {
            document.getElementById('chat-section').style.display = 'none';
            document.getElementById('identity').style.display = 'block';
            document.getElementById('avatars').style.display = 'block';
            document.getElementById('my-avatars').style.display = 'block';
            document.getElementById('access').style.display = 'block';
        }

        // Event listeners for chat section
        document.addEventListener("DOMContentLoaded", function() {
            // Set up event listeners for chat functionality
            document.getElementById("send-button").addEventListener("click", () => {
                const input = document.getElementById("message-input");
                const message = input.value.trim();
                if (message) {
                    addMessage("You", message, selectedTribeColor, true);
                    input.value = "";
                    
                    // Simulate bot response based on keywords or random
                    setTimeout(() => {
                        if (message.toLowerCase().includes("funding")) {
                            addBotMessage("Have you considered angel investors or VC funding?");
                        } else if (message.toLowerCase().includes("market")) {
                            addBotMessage("Market research is crucial. What's your target demographic?");
                        } else if (message.toLowerCase().includes("startup")) {
                            addBotMessage("What stage is your startup at? Idea, MVP, or scaling?");
                        } else {
                            addRandomBotMessage();
                        }
                    }, 2000);
                }
            });
            
            document.getElementById("message-input").addEventListener("keypress", (e) => {
                if (e.key === "Enter") {
                    document.getElementById("send-button").click();
                }
            });
            
            document.getElementById("extract-btn").addEventListener("click", extractSummary);
            
            document.getElementById("refresh-btn").addEventListener("click", () => {
                messages = [];
                renderMessages();
                addSystemMessage("Chat has been manually refreshed");
                addSystemMessage("Previous discussion has been cleared");
            });
            
            document.getElementById("close-modal").addEventListener("click", () => {
                document.getElementById("summary-modal").style.display = "none";
            });
            
            window.addEventListener("click", (e) => {
                if (e.target === document.getElementById("summary-modal")) {
                    document.getElementById("summary-modal").style.display = "none";
                }
            });
        });
    </script>
</body>
</html>
